document.addEventListener("DOMContentLoaded", function () {
    const formAnak = document.getElementById("form-anak");
    const formIbu = document.getElementById("form-ibu");
    const kabupatenSelect = document.getElementById("kabupaten");
    const kecamatanSelect = document.getElementById("kecamatan");
    const desaSelect = document.getElementById("desa");

    const kabupatenNamaInput = document.getElementById("kabupaten_nama");
    const kecamatanNamaInput = document.getElementById("kecamatan_nama");
    const desaNamaInput = document.getElementById("desa_nama");

    fetch("https://www.emsifa.com/api-wilayah-indonesia/api/regencies/32.json")
        .then((res) => res.json())
        .then((data) => {
            data.forEach((kabupaten) => {
                const option = document.createElement("option");
                option.value = kabupaten.id;
                option.text = kabupaten.name;
                kabupatenSelect.appendChild(option);
            });
        });

    kabupatenSelect.addEventListener("change", function () {
        const kabupatenId = this.value;

        if (kabupatenId !== "") {
            kabupatenNamaInput.value = this.options[this.selectedIndex].text;

            kecamatanSelect.disabled = false;
            kecamatanSelect.innerHTML = `<option value="">Pilih Kecamatan</option>`;
            desaSelect.disabled = true;
            desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;
            kecamatanNamaInput.value = "";
            desaNamaInput.value = "";

            fetch(
                `https://www.emsifa.com/api-wilayah-indonesia/api/districts/${kabupatenId}.json`
            )
                .then((res) => res.json())
                .then((data) => {
                    data.forEach((kecamatan) => {
                        const option = document.createElement("option");
                        option.value = kecamatan.id;
                        option.text = kecamatan.name;
                        kecamatanSelect.appendChild(option);
                    });

                    kabupatenSelect.disabled = true;
                });
        } else {
            kabupatenNamaInput.value = "";
            kecamatanNamaInput.value = "";
            desaNamaInput.value = "";
            kecamatanSelect.innerHTML = `<option value="">Pilih Kecamatan</option>`;
            kecamatanSelect.disabled = true;
            desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;
            desaSelect.disabled = true;
        }
    });

    kecamatanSelect.addEventListener("change", function () {
        const kecamatanId = this.value;

        if (kecamatanId !== "") {
            kecamatanNamaInput.value = this.options[this.selectedIndex].text;

            desaSelect.disabled = false;
            desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;
            desaNamaInput.value = "";

            fetch(
                `https://www.emsifa.com/api-wilayah-indonesia/api/villages/${kecamatanId}.json`
            )
                .then((res) => res.json())
                .then((data) => {
                    data.forEach((desa) => {
                        const option = document.createElement("option");
                        option.value = desa.id;
                        option.text = desa.name;
                        desaSelect.appendChild(option);
                    });

                    kecamatanSelect.disabled = true;
                });
        } else {
            kecamatanNamaInput.value = "";
            desaNamaInput.value = "";
            desaSelect.disabled = true;
            desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;
        }
    });

    desaSelect.addEventListener("change", function () {
        const desaId = this.value;

        if (desaId !== "") {
            desaNamaInput.value = this.options[this.selectedIndex].text;

            desaSelect.disabled = true;
        } else {
            desaNamaInput.value = "";
        }
    });
    formAnak.addEventListener("reset", function () {
        kabupatenSelect.disabled = false;
        kecamatanSelect.disabled = true;
        desaSelect.disabled = true;

        kabupatenSelect.selectedIndex = 0;
        kecamatanSelect.innerHTML = `<option value="">Pilih Kecamatan</option>`;
        desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;

        kabupatenNamaInput.value = "";
        kecamatanNamaInput.value = "";
        desaNamaInput.value = "";
    });
    formIbu.addEventListener("reset", function () {
        kabupatenSelect.disabled = false;
        kecamatanSelect.disabled = true;
        desaSelect.disabled = true;

        kabupatenSelect.selectedIndex = 0;
        kecamatanSelect.innerHTML = `<option value="">Pilih Kecamatan</option>`;
        desaSelect.innerHTML = `<option value="">Pilih Desa</option>`;

        kabupatenNamaInput.value = "";
        kecamatanNamaInput.value = "";
        desaNamaInput.value = "";
    });
});


  <label for="kabupaten">Kabupaten</label>
<select id="kabupaten" name="kabupaten_id" class="form-control">
  <option value="">Pilih Kabupaten</option>
</select>
<input type="hidden" name="kabupaten" id="kabupaten_nama" />

<label for="kecamatan">Kecamatan</label>
<select id="kecamatan" name="kecamatan_id" class="form-control" disabled>
  <option value="">Pilih Kecamatan</option>
</select>
<input type="hidden" name="kecamatan" id="kecamatan_nama" />

<label for="desa">Desa</label>
<select id="desa" name="desa_id" class="form-control" disabled>
  <option value="">Pilih Desa</option>
</select>
<input type="hidden" name="desa" id="desa_nama" />
